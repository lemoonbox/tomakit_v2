{% extends 'base.html'%}
{% load static from staticfiles %}
{% load v2d1_board_tags %}
<title>{%block title%}Tomakit-클래스 제안하기{%endblock%}</title>
{%block style%}
<style>
    .tmk-search {max-width:500px; margin:auto;}
    .tmk-search button {height:44px;}
    .tmk-search .col-md-4 {margin-right:-10px;margin-left:-10px;}
</style>
{%endblock%}
<body>
{%block content%}

<div class="tmk-main-body col-md-12">
    <div class="tmk-page-header col-md-10 col-md-offset-1">
        <div class="tmk-h2 tmk-title">클래스 제안하기</div>
        <div class="tmk-h4">찾으시는 클래스가 없다면, 지금 바로 제안해보세요!<br>여러분들의 줄서기 투표를 거쳐 인기있는 클래스가 개설됩니다</div>

        <a class="btn btn-primary" href="http://{{HTTP_HOST}}/v2.1/demand/create">클래스 제안</a>
        <div class="tmk-page-pick"></div>
    </div>

    <div class="tmk-search">
        <form method="GET" id="formform" action="{% url 'demnad_filter_redirct_v2d1' %}">
            {%csrf_token%}
            <div class="tmk-search cover">
                <div class="tmk-qitem-selecter-wrapper col-md-4 col-xs-4">
                    <div class="selecter cover" tabindex="0">
                        <select name="category" required class="selecter_3 selecter-element" data-selecter-options="{&quot;cover&quot;:&quot;true&quot;}" tabindex="-1">
                            <!--onchange="this.form.submit()"-->
                            <option value="all"
                                    {% if begin_data.category == 'all' %}selected{% endif %}>모든 카테고리</option>
                            <option value="leather"
                                    {% if begin_data.category == 'leather' %}selected{% endif %}>가죽공예</option>
                            <option value="calligraphy"
                                    {% if begin_data.category == 'calligraphy'%}selected{% endif %}>캘리그라피</option>
                            <option value="flower"
                                    {% if begin_data.category == 'flower'%}selected{% endif %}>플라워&디퓨저</option>
                            <option value="dyeing"
                                    {% if begin_data.category == 'dyeing'%}selected{% endif %}>천연염색</option>
                            <option value="pottery"
                                    {% if begin_data.category == 'pottery'%}selected{% endif %}>도자기공예</option>
                            <option value="home_living"
                                    {% if begin_data.category == 'home_living'%}selected{% endif %}>Home&Living</option>
                            <option value="sewing"
                                    {% if begin_data.category == 'sewing'%}selected{% endif %}>미싱&옷만들기</option>
                            <option value="woodwork"
                                    {% if begin_data.category == 'woodwork'%}selected{% endif %}>목공예</option>
                            <option value="art"
                                    {% if begin_data.category == 'art'%}selected{% endif %}>미술</option>
                            <option value="toreutics"
                                    {% if begin_data.category == 'toreutics'%}selected{% endif %}>금속공예&악세사리</option>
                            <option value="knot"
                                    {% if begin_data.category == 'knot'%}selected{% endif %}>매듭공예</option>
                            <option value="knit"
                                    {% if begin_data.category == 'knit'%}selected{% endif %}>뜨개질</option>
                            <option value="bake"
                                    {% if begin_data.category == 'bake'%}selected{% endif %}>베이킹&쿠킹</option>
                            <option value="cosmetics"
                                    {% if begin_data.category == 'cosmetics'%}selected{% endif %}>천연화장품&비누</option>
                            <option value="etc"
                                    {% if begin_data.category == 'etc'%}selected{% endif %}>기타</option>
                        </select>
                        <span class="selecter-selected" onchange="this.form.submit()" onclick="btnClick(this)">카테고리 선택</span>
                        <div class="selecter-options" data-value="">
                            <!--<span class="selecter-item selected" data-value="" onclick="selecting(this, '')">카테고리</span>-->
                            <div class="selecter-item"
                                 data-value="id"
                                 onclick="selecting(this, 'all')">모든 카테고리</div>
                            <div class="selecter-item"
                                 data-value="id"
                                 onclick="selecting(this, 'leather')">가죽공예</div>
                            <div class="selecter-item"
                                 data-value="id"
                                 onclick="selecting(this, 'calligraphy')">캘리그라피</div>
                            <div class="selecter-item"
                                 data-value="id"
                                 onclick="selecting(this, 'flower')">플라워&디퓨저</div>
                            <div class="selecter-item"
                                 data-value="id"
                                 onclick="selecting(this, 'dyeing')">천연염색</div>
                            <div class="selecter-item"
                                 data-value="id"
                                 onclick="selecting(this, 'pottery')">도자기공예</div>
                            <div class="selecter-item"
                                 data-value="id"
                                 onclick="selecting(this, 'home_living')">Home&Living</div>
                            <div class="selecter-item"
                                 data-value="id"
                                 onclick="selecting(this, 'sewing')">미싱&옷만들기</div>
                            <div class="selecter-item"
                                 data-value="id"
                                 onclick="selecting(this, 'woodwork')">목공예</div>
                            <div class="selecter-item"
                                 data-value="id"
                                 onclick="selecting(this, 'art')">미술</div>
                            <div class="selecter-item"
                                 data-value="id"
                                 onclick="selecting(this, 'toreutics')">금속공예&악세사리</div>
                            <div class="selecter-item"
                                 data-value="id"
                                 onclick="selecting(this, 'knot')">매듭공예</div>
                            <div class="selecter-item"
                                 data-value="id"
                                 onclick="selecting(this, 'knit')">뜨개질</div>
                            <div class="selecter-item"
                                 data-value="id"
                                 onclick="selecting(this, 'bake')">베이킹&쿠킹</div>
                            <div class="selecter-item"
                                 data-value="id"
                                 onclick="selecting(this, 'cosmetics')">천연화장품&비누</div>
                            <div class="selecter-item"
                                 data-value="id"
                                 onclick="selecting(this, 'etc')">기타</div>
                        </div>
                    </div>
                </div>



                <div class="tmk-qitem-selecter-wrapper col-md-4 col-xs-4">
                    <div class="selecter cover" tabindex="0">
                        <!--onchange="this.form.submit()"-->
                        <select name="state" required class="selecter_3 selecter-element" data-selecter-options="{&quot;cover&quot;:&quot;true&quot;}" tabindex="-1">
                            <option value="all"
                                    {% if begin_data.category == 'all' %}selected{% endif %}>모든 지역</option>
                            <option value="seoul"
                                    {% if demand_data.state == 'seoul'%}selected{% endif %}>서울</option>
                            <option value="incheon_gyeonggi"
                                    {% if demand_data.state == 'incheon_gyeonggi'%}selected{% endif %}>경기도&인천</option>
                            <option value="busan_ulsan_gyeongnam"
                                    {% if demand_data.state == 'busan_ulsan_gyeongnam'%}selected{% endif %}>부산&울산&경남</option>
                            <option value="daegu_gyeongbuk"
                                    {% if demand_data.state == 'daegu_gyeongbuk'%}selected{% endif %}>대구&경북</option>
                            <option value="daejeon_chungcheong"
                                    {% if demand_data.state == 'daejeon_chungcheong'%}selected{% endif %}>대전&충청</option>
                            <option value="gwangju_jeonla"
                                    {% if demand_data.state == 'gwangju_jeonla'%}selected{% endif %}>광주&전라</option>
                            <option value="gangwon"
                                    {% if demand_data.state == 'gangwon'%}selected{% endif %}>강원</option>
                            <option value="jeju"
                                    {% if demand_data.state == 'jeju'%}selected{% endif %}>제주</option>
                            <option value="etc"
                                    {% if demand_data.state == 'etc'%}selected{% endif %}>기타</option>
                        </select>
                        <span class="selecter-selected" onclick="btnClick(this)">지역 선택</span>
                        <div class="selecter-options" data-value="">
                            <!--<span class="selecter-item selected" data-value="" onclick="selecting(this, '')">카테고리</span>-->
                            <div class="selecter-item"
                                 data-value="id"
                                 onclick="selecting(this, 'all')">모든 카테고리</div>
                            <div class="selecter-item"
                                 data-value="id"
                                 onclick="selecting(this, 'seoul')">서울</div>
                            <div class="selecter-item"
                                 data-value="id"
                                 onclick="selecting(this, 'incheon_gyeonggi')">경기도 & 인천</div>
                            <div class="selecter-item"
                                 data-value="id"
                                 onclick="selecting(this, 'busan_ulsan_gyeongnam')">부산 & 울산 & 경남</div>
                            <div class="selecter-item"
                                 data-value="id"
                                 onclick="selecting(this, 'daegu_gyeongbuk')">대구&경북</div>
                            <div class="selecter-item"
                                 data-value="id"
                                 onclick="selecting(this, 'daejeon_chungcheong')">대전&충청</div>
                            <div class="selecter-item"
                                 data-value="id"
                                 onclick="selecting(this, 'gwangju_jeonla')">광주&전라</div>
                            <div class="selecter-item"
                                 data-value="id"
                                 onclick="selecting(this, 'gangwon')">강원</div>
                            <div class="selecter-item"
                                 data-value="id"
                                 onclick="selecting(this, 'jeju')">제주</div>
                            <div class="selecter-item"
                                 data-value="id"
                                 onclick="selecting(this, 'etc')">기타</div>
                        </div>
                    </div>
                </div>

                <div>
                    <button class="btn btn-info" type="submit" value="검색">검색</button>
                </div>
            </div>
        </form>
        </div>
    <div id="data-here">
    {% for class in classlist %}
    <br>
    카테고리 ::{{class.category}}<br><br>
    수업제목::{{class.title}}<br><br>
    설명::{{class.descript}}<br><br>
    목표::{{class.demand_post.goal|goaltag2han}}<br><br>
    {% if request.user.t2profile_set.first.mobli_able %}
        <a href="{% url 'lineup_pageing_v2d1' class.id page_currunt cate_current state_current%}?lineup_next=/v2.1/board/demand_list/{{page_currunt}}/{{cate_current}}/{{state_current}}">
    {% else%}
        <a href="{% url 'mobli_require_v2d1' class.id %}?lineup_next=/v2.1/board/demand_list/{{page_currunt}}/{{cate_current}}/{{state_current}}">
    {% endif %}
        {% if request.user in class.inline_users.all %}
        줄서기 취소
        {% else %}
        줄서기
        {% endif %}
        <!--줄선 사람 숫자-->
        {% if class.inline_users.count %}
        ({{class.inline_users.count}})
        {% else %}
        (0)
        {% endif %}
        {% if class.inline_users.count %}
        {% for user in class.inline_users.all %}
        <img src="{{MEDIA_URL}}{{user.t2profile_set.first.pro_pic}}">
        {% endfor %}
        {% endif %}
    </a><br>

<!--pagination-->
    {% endfor %}

    {% for arrow in arrows %}
    {% if arrow.nav_before %}
    <a href="http://{{HTTP_HOST}}/v2.1/board/demand_list/{{arrow.befor_page}}/{{cate_current}}/{{state_current}}"><|</a>
    {% endif %}
    {% endfor %}
    {% for page in pages %}
    {% if page.page_current %}
    <b>{{page.page}}</b>|
    {% else %}
    <a href="http://{{HTTP_HOST}}/v2.1/board/demand_list/{{page.page}}/{{cate_current}}/{{state_current}}">{{page.page}}</a>|
    {% endif %}
    {% endfor %}
    {% for arrow in arrows %}
    {% if arrow.nav_next %}
    <a href="http://{{HTTP_HOST}}/v2.1/board/demand_list/{{arrow.next_page}}/{{cate_current}}/{{state_current}}">|></a>
    {% endif %}
    {% endfor %}
    </div>
</div>

{%endblock%}
{%block script%}
<script src='{%static "media/js/qitem_create.js" %}'></script>
<!--<script type="text/javascript">-->
    <!--var frm = $('#formform');-->
    <!--frm.submit(function (ev) {-->
        <!--$.ajax({-->
            <!--type: frm.attr('method'),-->
            <!--url: frm.attr('action'),-->
            <!--data: frm.serialize(),-->
            <!--success: function (data) {-->
                <!--alert('ok');-->
            <!--}-->
        <!--});-->

        <!--ev.preventDefault();-->
    <!--});-->
<!--</script>-->
{%endblock%}